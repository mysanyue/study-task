## 为什么现在还要学函数式编程

* 函数式编程是随着 React 的流行受到越来越多的关注
* Vue 3也开始拥抱函数式编程
* 函数式编程可以抛弃 this
* 打包过程中可以更好的利用 tree shaking 过滤无用代码
* 方便测试、方便并行处理
* 有很多库可以帮助我们进行函数式开发：lodash、underscore、ramda

## 什么是函数式编程

函数式编程(Functional Programming, FP)，FP 是编程范式之一，我们常听说的编程范式还有面向过程
编程、面向对象编程。

* 面向对象编程的思维方式：把现实世界中的事物抽象成程序世界中的类和对象，通过封装、继承和多态来演示事物事件的联系
* 函数式编程的思维方式：把现实世界的事物和事物之间的联系抽象到程序世界（对运算过程进行抽象）

  + 程序的本质：根据输入通过某种运算获得相应的输出，程序开发过程中会涉及很多有输入和输出的函数
  + x -> f(联系、映射) -> y，y=f(x)
  + 函数式编程中的函数指的不是程序中的函数(方法)，而是数学中的函数即映射关系，例如：y = sin(x)，x和y的关系
  + 相同的输入始终要得到相同的输出(纯函数)
  + 函数式编程用来描述数据(函数)之间的映射

``` js
// 非函数式
let num1 = 2;
let num2 = 3;
let sum = num1 + num2 console.log(sum);

// 函数式 
function add(n1, n2) {
  return n1 + n2;
}
let sum = add(2, 3);
console.log(sum);
```

## 什么是高阶函数

* 高阶函数 (Higher-order function)
  + 可以把函数作为参数传递给另一个函数
  + 可以把函数作为另一个函数的返回结果
* 函数作为参数

``` js
// forEach
function forEach(array, fn) {
  for (let i = 0; i < array.length; i++) {
    fn(array[i]);
  }
}

// filter
function filter(array, fn) {
  let ret = [];
  for (let i = 0; i < array.length; i++) {
    if (fn(array[i])) {
      ret.push(array[i]);
    }
  }
  return ret;
}
```

## 使用高阶函数的意义

* 抽象可以帮我们屏蔽细节，只需要关注与我们的目标
* 高阶函数是用来抽象通用的问题

``` js
// 面向过程的方式
let array = [1, 2, 3, 4];
for (let i = 0; i < array.length; i++) {
  console.log(array[i]);
}

// 高阶高阶函数 
let array = [1, 2, 3, 4];

forEach(array, item => {
  console.log(item);
});

let r = filter(array, item => {
  return item % 2 === 0
});
```

## 模拟常用高阶函数 

``` js
// map
const map = (array, fn) => {
  let ret = [];
  for (let value of array) {
    ret.push(fn(value));
  }
  return ret;
}

// every
const every = (array, fn) => {
  let ret = true;
  for (let value of array) {
    ret = fn(value);
    if (!ret) break;
  }
  return ret;
}

// some
const some = (array, fn) => {
  let ret = false;
  for (let value of array) {
    ret = fn(value);
    if (ret) break;
  }
  return ret;
}
```
